{% extends "layout_new_easy.html" %}

{% block script %}
var ans=["{{ easy.ans_num[0] }}","{{ easy.ans_den[0] }}","{{ easy.ans_num[1] }}","{{ easy.ans_den[1] }}"]
console.log(ans)
function checkQuo(i){
    if(document.getElementsByTagName("input")[i].value == ans[i]){
        alert("Correct");
        document.getElementsByClassName("step0")[i].classList.add("active");
    }
    else{
        alert("you have not divided properly...");
    }
}

function checkRem(i){
    if(document.getElementsByTagName("input")[i].value == ans[i]){
        alert("Correct");
        document.getElementsByClassName("step0")[i].classList.add("active");
    }
    else{
        alert("you have not divided properly...");
    }
}

        var arrayFromStroage = JSON.parse(localStorage.getItem("textValues"));
        var arrayLength = arrayFromStroage.length;
        var total_score = 0;
        if(localStorage.getItem('textValues') == null || arrayLength >= 4){
          if(arrayLength == 4){
            const reducer = (accumulator, curr) => accumulator + curr;
            total_score = arrayFromStroage.reduce(reducer);
            // var division =[];
            
          }
          var division =[];
        }
        else{
          division =  JSON.parse(localStorage.getItem('textValues'));
        }

        console.log(division);

        var hint_count = 0;
        var quesid = "{{ easy.qid }}";

        function addItemToArray(){
          let score = 25 - (5*hint_count);
          division.push(score);
          localStorage.setItem('textValues', JSON.stringify(division));
        }

        $(document).ready(function(){
          $('.toast').toast('hide');
          console.log(arrayLength);
          if(arrayLength < 4){
            for(i = 0;i < arrayLength;i++){
              document.getElementsByClassName("bi")[i].classList.add("done");
            }  
          }
        
          $('#hint-btn').click(function(){
            hint_count++;
          })
           
          $('#next-btn').click(function(){
            $('.toast').toast('show');
            addItemToArray();
            if(arrayLength == 4){
              var data = {qid: quesid, score: total_score};
              $.post('/score', {'data': data}, function(response){
                window.location = "{{url_for('home')}}";
              });
              // $.ajax({
              //     type: 'POST',
              //     url: '/score',
              //     contentType: 'application/json; charset=utf-8',
              //     data: JSON.stringify({'data': data}),
              //     dataType: 'json',
              //     success: function(response){
              //       return location.replace("{{url_for('home')}}");
              //     }
              // });


              // event.preventDefault();
            }
            else{
              setTimeout(function(){ location.reload() }, 1000);      
            }
                  
          });
        });




{% endblock %}

{% block chapter %}Fractions{% endblock %} 
{% block topic %}Division{% endblock %}


<!-- {% block question %}Find Quotient and remainder{% endblock%} -->

{% block content %}

{% for i in range(0,3,2) %}
    <h5 class="card-title">{{easy.q[i]}}</h5>
    {{ easy.label1 }}: <input type="text" class="quo" onchange = "checkQuo({{ i }});">
    <br><br><br>
    {{ easy.label2 }}: <input type="text" class="rem" onchange = "checkRem({{ i+1 }});">
    <br><br>
{% endfor %}
{% endblock %}

{% block hint %}
<img src="{{ url_for('static', filename = 'images/Long Division Calculator with Remainders.png') }}" alt="" style="margin-left: 30%;">
{% endblock %}